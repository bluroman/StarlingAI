package screens{		import starling.core.Starling;		import starling.display.Image;	import starling.display.Sprite;import starling.display.Sprite3D;import starling.events.Event;	import starling.events.Touch;	import starling.events.TouchPhase;	import starling.events.TouchEvent;	import starling.text.TextField;	import starling.textures.Texture;	import starling.animation.Juggler;	import starling.animation.Tween;	import starling.animation.Transitions;import starling.utils.Align;import utils.ScoreKeeper;//import com.game.Constants;		public class ScreenWin extends Scene	{				private var _controller:Object;				private var _scoreKeeper:ScoreKeeper = ScoreKeeper.getInstance();				private var _panelSprite:Sprite;		private var _logo:Image;		private var _panelImage:Image;		private var _btnImage:Image;						private var _logoPosYFinal:int;		private var _panelPosYFinal:int;		//private var _panelHeight:int;				private var _array_objects:Array = [];        public function ScreenWin() {            //super();            //launchSpaceShip();        }        override public function init(width:Number, height:Number):void		{			//_controller = data.controller;            super.init(width, height);						init_logo();			init_panel();			init_btn();						_array_objects.push( _scoreKeeper );		}				public override function dispose():void        {			_btnImage.removeEventListener( TouchEvent.TOUCH, onTouched );						removeChild( _panelSprite, true );			removeChild( _panelImage, true );			removeChild( _btnImage, true );						for each( var obj:* in _array_objects )obj = null;			            super.dispose();        }						// STARLING OBJECTS FUNCS ---------------------------------------------				private function init_logo():void		{			// set texture			var logoTexture:Texture = Root.assets.getTexture( "Logo" );			_logo = new Image( logoTexture );						_logo.x = Math.round( (stage.stageWidth - _logo.width)/2 );			_logoPosYFinal = Math.round( _logo.height * .04);			_logo.y = _logoPosYFinal - 60;			_logo.alpha = 0;					addChild( _logo );						// animate in			var tweenLogo:Tween = new Tween( _logo, 1, Transitions.EASE_OUT_BACK );			tweenLogo.animate("y", _logoPosYFinal);			tweenLogo.fadeTo(1);			Starling.juggler.add( tweenLogo );						_array_objects.push( _logo );		}				private function init_panel():void		{						// create sprite to hold panel graphic and text			_panelSprite = new Sprite();			addChild( _panelSprite );						// set texture			var panelTexture:Texture = Root.assets.getTexture( "Win" );			_panelImage = new Image( panelTexture );			_panelSprite.addChild( _panelImage );						//-- text						// user score text			var txt_user:String;			var txt_userFontSize:int;			var txt_userYPos:int;			txt_user = Constants.TXT_YOUR_SCORE + String(_scoreKeeper.score);			txt_userFontSize = 28;			txt_userYPos = 9;            var _tf_score:TextField = new TextField(_panelSprite.width, 30, txt_user);            _tf_score.format.setTo(Constants.DEFAULT_FONT, txt_userFontSize, 0xc9d3d2);            _tf_score.format.bold = true;            _tf_score.format.verticalAlign = Align.TOP;			_tf_score.y = txt_userYPos;			_panelSprite.addChild( _tf_score );						// congratulations text            var _tf_congrats:TextField = new TextField(_panelSprite.width, 25, Constants.TXT_CONGRATULATIONS);            _tf_congrats.format.setTo(Constants.DEFAULT_FONT, 20, 0xc9d3d2);            _tf_congrats.format.bold = true;            _tf_congrats.format.verticalAlign = Align.TOP;			_tf_congrats.y = 37;			_panelSprite.addChild( _tf_congrats );						// promo code text            var _tf_promo:TextField = new TextField(_panelSprite.width, 16, Constants.TXT_PROMO_CODE);            _tf_promo.format.setTo(Constants.DEFAULT_FONT, 14, 0xc9d3d2);            _tf_promo.format.bold = true;            _tf_promo.format.verticalAlign = Align.TOP;			_tf_promo.y = 286;			_panelSprite.addChild( _tf_promo );									//-- position/dynamically scale to screen size									_panelPosYFinal = Math.round( _logo.height + _logoPosYFinal - (_logo.height * .1) );			_panelSprite.x = Math.round( (stage.stageWidth - _panelSprite.width)/2 );			_panelSprite.y = _panelPosYFinal - 60;			_panelSprite.alpha = 0;											//animate in			var tweenPanel:Tween = new Tween( _panelSprite, 1, Transitions.EASE_OUT_BACK );			tweenPanel.animate("y", _panelPosYFinal );			tweenPanel.fadeTo(1);			tweenPanel.delay = .5;			Starling.juggler.add( tweenPanel );						_array_objects.push( _panelSprite, _panelImage, _tf_score, _tf_congrats, _tf_promo );		}				private function init_btn():void		{			// set texture			var btnTexture:Texture =Root.assets.getTexture( "WinLoseBtnStartOver" );			_btnImage = new Image( btnTexture );						// position/dynamically scale to screen size			// iPad			if( stage.stageWidth/stage.stageHeight > .7 )			{				_btnImage.scaleX = _btnImage.scaleY = (stage.stageWidth / _btnImage.width) * .85;			// all other devices				}else{				_btnImage.scaleX = _btnImage.scaleY = stage.stageWidth / _btnImage.width;			}			_btnImage.x = Math.round( (stage.stageWidth - _btnImage.width)/2 );						var _btnPosYFinal:int = Math.round( _panelPosYFinal + _panelSprite.height + (_panelSprite.height * .023));			_btnImage.y = _btnPosYFinal - 60;			_btnImage.alpha = 0;			addChild( _btnImage );						_btnImage.addEventListener( TouchEvent.TOUCH, onTouched );						// animate in			var tweenBtn:Tween = new Tween( _btnImage, 1, Transitions.EASE_OUT_BACK );			tweenBtn.animate("y", _btnPosYFinal);			tweenBtn.fadeTo(1);			tweenBtn.delay = 1;			Starling.juggler.add( tweenBtn );						_array_objects.push( _btnImage );		}						// BTN FUNCS ---------------------------------------------				private function onTouched( event:TouchEvent ):void		{						var touch:Touch = Touch( event.getTouch( stage ) );			if ( touch.phase == TouchPhase.ENDED )			{				//_controller.change_screen( {screenRequest:Constants.REQUEST_HOME} );                dispatchEventWith(Menu.HOME_SCREEN, true);			}		}	}	}